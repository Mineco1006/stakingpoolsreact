{"ast":null,"code":"import _classCallCheck from\"C:/Users/Nico/Documents/GitHub/stakingpoolsreact/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Nico/Documents/GitHub/stakingpoolsreact/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/Nico/Documents/GitHub/stakingpoolsreact/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Nico/Documents/GitHub/stakingpoolsreact/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import Web3 from'web3';import QuarkChain from'quarkchain-web3';import React from'react';import axios from'axios';import{ABIinterface,roiABIinterface,jrpcUrl,blockAllowance,admin}from'./config.js';import{toast}from'react-toastify';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var web3=new Web3();QuarkChain.injectWeb3(web3,jrpcUrl);var MinerInterface=/*#__PURE__*/function(_React$Component){_inherits(MinerInterface,_React$Component);var _super=_createSuper(MinerInterface);function MinerInterface(){var _this;_classCallCheck(this,MinerInterface);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={balance:'',roi:'',minStake:'',poolStatus:'',minerFee:'',poolFee:'',snapshotdate:''};return _this;}_createClass(MinerInterface,[{key:\"componentDidMount\",value:function componentDidMount(props){this.getContractInformation();}},{key:\"getContractInformation\",value:function getContractInformation(){var _this2=this;var roiContract=web3.qkc.contract(roiABIinterface).at(this.props.poolROIAddress);var poolContract=web3.qkc.contract(ABIinterface).at(this.props.poolAddress);var minerFee;var poolFee;var v1;var v2;var v3;var v4;var v5;var v6;var v7;web3.qkc.getBalance(this.props.poolAddress,function(err,res){v1=Number((res/Math.pow(10,18)).toFixed(2)).toLocaleString()+\" QKC\";this.setState({balance:v1});}.bind(this));poolContract.minerFee.call(function(err,res){minerFee=res/10000;v2=res/100+\"%\";this.setState({minerFee:v2});}.bind(this));poolContract.poolFee.call(function(err,res){poolFee=res/10000;v3=res/100+\"%\";this.setState({poolFee:v3});}.bind(this));poolContract.minStake.call(function(err,res){v4=Number((res/Math.pow(10,18)).toFixed(2)).toLocaleString()+\" QKC\";this.setState({minStake:v4});}.bind(this));poolContract.isClosed.call(function(err,res){if(res==false){v5=\"Open\";}if(res==true){v5=\"Closed\";}this.setState({poolStatus:v5});}.bind(this));axios.post(\"http://localhost:3001/api/getSnapshot\",{chainId:this.props.index}).then(function(response){var data=response.data;web3.qkc.getBalance(_this2.props.poolAddress,function(err,res){var result=((res-Number(data.balance))/((Number(data.balance)/blockAllowance[this.props.index]).toFixed(0)*blockAllowance[this.props.index])/(Date.now()-Number(data.timestamp))*(1000*3600*24*30)*(1-(minerFee+poolFee))*100).toFixed(3);v6=result+\"% / \"+(result*12).toFixed(1)+\"%\";var date=new Date(Number(data.timestamp));v7=date.toUTCString();this.setState({roi:v6});this.setState({snapshotdate:v7});axios.post(\"http://localhost:3001/api/newROI\",{chainId:this.props.index,roi:result});}.bind(_this2));});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"table\",{className:\"pool\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{className:\"rowcolour1\",href:\"https://mainnet.quarkchain.io/address/\"+this.props.poolAddress,children:/*#__PURE__*/_jsx(\"th\",{colSpan:\"3\",children:/*#__PURE__*/_jsxs(\"a\",{href:\"https://mainnet.quarkchain.io/address/\"+this.props.poolAddress,target:\"_blank\",className:\"href\",children:[this.props.minerName,\"'s Chain \",this.props.index,\" Pool\"]})})})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{className:\"rowcolour2\",children:[/*#__PURE__*/_jsx(\"td\",{children:\"Estimated ROI monthly/annual\"}),/*#__PURE__*/_jsx(\"td\",{colSpan:\"2\",children:this.state.roi})]}),/*#__PURE__*/_jsxs(\"tr\",{className:\"rowcolour1\",children:[/*#__PURE__*/_jsx(\"td\",{children:\"Total Stakes\"}),/*#__PURE__*/_jsx(\"td\",{colSpan:\"2\",children:this.state.balance})]}),/*#__PURE__*/_jsxs(\"tr\",{className:\"rowcolour2\",children:[/*#__PURE__*/_jsx(\"td\",{children:\"Minimum Stake\"}),/*#__PURE__*/_jsx(\"td\",{colSpan:\"2\",children:this.state.minStake})]}),/*#__PURE__*/_jsxs(\"tr\",{className:\"rowcolour1\",children:[/*#__PURE__*/_jsx(\"td\",{children:\"Pool Status\"}),/*#__PURE__*/_jsx(\"td\",{colSpan:\"2\",children:this.state.poolStatus})]}),/*#__PURE__*/_jsxs(\"tr\",{className:\"rowcolour2\",children:[/*#__PURE__*/_jsx(\"td\",{children:\"Miner Fee\"}),/*#__PURE__*/_jsx(\"td\",{colSpan:\"2\",children:this.state.minerFee})]}),/*#__PURE__*/_jsxs(\"tr\",{className:\"rowcolour1\",children:[/*#__PURE__*/_jsx(\"td\",{children:\"Pool Fee\"}),/*#__PURE__*/_jsx(\"td\",{colSpan:\"2\",children:this.state.poolFee})]}),/*#__PURE__*/_jsxs(\"tr\",{className:\"rowcolour2\",children:[/*#__PURE__*/_jsx(\"td\",{children:\"Last Snapshot Date\"}),/*#__PURE__*/_jsx(\"td\",{colSpan:\"2\",children:this.state.snapshotdate})]})]}),/*#__PURE__*/_jsx(MinerChangeInterface,{poolAddress:this.props.poolAddress,minerName:this.props.minerName,web3:this.props.web3,index:this.props.index})]});}}]);return MinerInterface;}(React.Component);export{MinerInterface as default};var MinerChangeInterface=/*#__PURE__*/function(_React$Component2){_inherits(MinerChangeInterface,_React$Component2);var _super2=_createSuper(MinerChangeInterface);function MinerChangeInterface(){var _this3;_classCallCheck(this,MinerChangeInterface);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this3=_super2.call.apply(_super2,[this].concat(args));_this3.state={minStake:'',minerFee:'',poolFee:'',poolContract:'',userAddress:''};return _this3;}_createClass(MinerChangeInterface,[{key:\"componentDidMount\",value:function componentDidMount(props){this.setState({poolContract:this.props.web3.qkc.contract(ABIinterface).at(this.props.poolAddress)});if(window.ethereum){this.props.web3.eth.getAccounts().then(function(accounts){this.setState({userAddress:accounts[0]});}.bind(this));}}},{key:\"handleMinStakeChange\",value:function handleMinStakeChange(event){this.setState({minStake:event.target.value});}},{key:\"handleMinerFeeChange\",value:function handleMinerFeeChange(event){this.setState({minerFee:event.target.value});}},{key:\"handlePoolFeeChange\",value:function handlePoolFeeChange(event){this.setState({poolFee:event.target.value});}},{key:\"adjustMinStake\",value:function adjustMinStake(){//called when \"Withdraw\" button is clicked\nvar txParams={gasPrice:2e9,gas:350000,fromFullShardKey:QuarkChain.getFullShardKeyFromQkcAddress(this.props.poolAddress),toFullShardKey:QuarkChain.getFullShardKeyFromQkcAddress(this.props.poolAddress),networkId:1};this.state.poolContract.adjustMinStake(this.state.minStake*1e18,txParams,function(err,res){console.log(res);if(res!=\"0x000000000000000000000000000000000000000000000000000000000000000000000000\"&&res!=undefined&&res!=null){toast.success(function(_ref){var closeToast=_ref.closeToast;return/*#__PURE__*/_jsxs(\"div\",{children:[\"Your \",/*#__PURE__*/_jsx(\"a\",{href:\"https://mainnet.quarkchain.io/tx/\".concat(res),target:\"_blank\",children:\"min stake adjustment\"}),\" was sent successfully\"]});});}else{toast.warn(\"Seems that your transaction has been declined\");}});}},{key:\"adjustMinerFee\",value:function adjustMinerFee(){//called when \"Withdraw\" button is clicked\nvar txParams={gasPrice:2e9,gas:350000,fromFullShardKey:QuarkChain.getFullShardKeyFromQkcAddress(this.props.poolAddress),toFullShardKey:QuarkChain.getFullShardKeyFromQkcAddress(this.props.poolAddress),networkId:1};this.state.poolContract.adjustMinerFee((this.state.minerFee*100).toFixed(2),txParams,function(err,res){if(res!=\"0x000000000000000000000000000000000000000000000000000000000000000000000000\"&&res!=undefined&&res!=null){toast.success(function(_ref2){var closeToast=_ref2.closeToast;return/*#__PURE__*/_jsxs(\"div\",{children:[\"Your \",/*#__PURE__*/_jsx(\"a\",{href:\"https://mainnet.quarkchain.io/tx/\".concat(res),target:\"_blank\",children:\"miner fee adjustment\"}),\" was sent successfully\"]});});}else{toast.warn(\"Seems that your transaction has been declined\");}});}},{key:\"adjustPoolFee\",value:function adjustPoolFee(){//called when \"Withdraw\" button is clicked\nvar txParams={gasPrice:2e9,gas:350000,fromFullShardKey:QuarkChain.getFullShardKeyFromQkcAddress(this.props.poolAddress),toFullShardKey:QuarkChain.getFullShardKeyFromQkcAddress(this.props.poolAddress),networkId:1};this.state.poolContract.adjustPoolFee(this.state.poolFee.toFixed(2)*100,txParams,function(err,res){if(res!=\"0x000000000000000000000000000000000000000000000000000000000000000000000000\"&&res!=undefined&&res!=null){toast.success(function(_ref3){var closeToast=_ref3.closeToast;return/*#__PURE__*/_jsxs(\"div\",{children:[\"Your \",/*#__PURE__*/_jsx(\"a\",{href:\"https://mainnet.quarkchain.io/tx/\".concat(res),target:\"_blank\",children:\"pool fee adjustment\"}),\" was sent successfully\"]});});}else{toast.warn(\"Seems that your transaction has been declined\");}});}},{key:\"changePoolStatus\",value:function changePoolStatus(status){//called when \"Withdraw\" button is clicked\nvar txParams={gasPrice:2e9,gas:350000,fromFullShardKey:QuarkChain.getFullShardKeyFromQkcAddress(this.props.poolAddress),toFullShardKey:QuarkChain.getFullShardKeyFromQkcAddress(this.props.poolAddress),networkId:1};this.state.poolContract.adjustPoolFee(status,txParams,function(err,res){if(res!=\"0x000000000000000000000000000000000000000000000000000000000000000000000000\"&&res!=undefined&&res!=null){toast.success(function(_ref4){var closeToast=_ref4.closeToast;return/*#__PURE__*/_jsxs(\"div\",{children:[\"Your \",/*#__PURE__*/_jsx(\"a\",{href:\"https://mainnet.quarkchain.io/tx/\".concat(res),target:\"_blank\",children:\"pool fee adjustment\"}),\" was sent successfully\"]});});}else{toast.warn(\"Seems that your transaction has been declined\");}});}},{key:\"flushContract\",value:function flushContract(){//called when \"Withdraw\" button is clicked\nvar txParams={gasPrice:2e9,gas:6000000,fromFullShardKey:QuarkChain.getFullShardKeyFromQkcAddress(this.props.poolAddress),toFullShardKey:QuarkChain.getFullShardKeyFromQkcAddress(this.props.poolAddress),networkId:1};this.state.poolContract.flushContract(txParams,function(err,res){if(res!=\"0x000000000000000000000000000000000000000000000000000000000000000000000000\"&&res!=undefined&&res!=null){toast.success(function(){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Your \",/*#__PURE__*/_jsx(\"a\",{href:\"https://mainnet.quarkchain.io/tx/\".concat(res),target:\"_blank\",children:\"pool fee adjustment\"}),\" was sent successfully\"]});});}else{toast.warn(\"Seems that your transaction has been declined\");}});}},{key:\"takeSnaphot\",value:function takeSnaphot(){this.props.web3.qkc.getBalance(this.props.poolAddress,function(err,res){axios.post(\"http://localhost:3001/api/newSnapshot\",{chainId:this.props.index,balance:res}).then(function(err,res){toast.success(function(){return/*#__PURE__*/_jsx(\"div\",{children:\"New snapshot successfully queried to database\"});});}.bind(this));}.bind(this));}},{key:\"render\",value:function render(){var _this4=this;if(this.state.userAddress!=admin[0]&&this.state.userAddress!=admin[1]&&this.state.userAddress!=admin[2]){return/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsx(\"tr\",{className:\"rowcolour1\",children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"2\",children:\"Please connect with a valid admin account\"})})});}else{return/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsx(\"tr\",{className:\"rowcolour1\",children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"3\",children:/*#__PURE__*/_jsx(\"button\",{className:\"but\",onClick:this.takeSnaphot.bind(this),children:\"Take New Snapshot\"})})}),/*#__PURE__*/_jsxs(\"tr\",{className:\"rowcolour2\",children:[/*#__PURE__*/_jsxs(\"td\",{children:[\"Adjust Miner Fee (\",this.props.minerName,\")\"]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{className:\"inp\",type:\"number\",min:\"0\",max:\"100\",placeholder:\"% value up to 2 decimals\",value:this.state.minerFee,onChange:function onChange(e){return _this4.handleMinerFeeChange(e);}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"but\",onClick:this.adjustMinerFee.bind(this),children:\"Change\"})})]}),/*#__PURE__*/_jsxs(\"tr\",{className:\"rowcolour1\",children:[/*#__PURE__*/_jsx(\"td\",{children:\"Adjust Minimum Stake (Nico)\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{className:\"inp\",type:\"number\",min:\"0\",placeholder:\"minStake in QKC\",value:this.state.minStake,onChange:function onChange(e){return _this4.handleMinStakeChange(e);}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"but\",onClick:this.adjustMinStake.bind(this),children:\"Change\"})})]}),/*#__PURE__*/_jsxs(\"tr\",{className:\"rowcolour2\",children:[/*#__PURE__*/_jsx(\"td\",{children:\"Adjust Pool Fee(Nico)\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{className:\"inp\",type:\"number\",min:\"0\",max:\"100\",placeholder:\"% value up to 2 decimals\",value:this.state.poolFee,onChange:function onChange(e){return _this4.handlePoolFeeChange(e);}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"but\",onClick:this.adjustPoolFee.bind(this),children:\"Change\"})})]}),/*#__PURE__*/_jsxs(\"tr\",{className:\"rowcolour1\",children:[/*#__PURE__*/_jsx(\"td\",{children:\"Open/Close Pool Allocations (Nico)\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"but\",onClick:function onClick(){return _this4.changePoolStatus(false);},children:\"Open\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"but\",onClick:function onClick(){return _this4.changePoolStatus(true);},children:\"Close\"})})]}),/*#__PURE__*/_jsx(\"tr\",{className:\"rowcolour2\",children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"3\",children:/*#__PURE__*/_jsx(\"button\",{className:\"but\",onClick:this.flushContract.bind(this),children:\"Flush Contract(Nico)\"})})})]});}}}]);return MinerChangeInterface;}(React.Component);","map":{"version":3,"sources":["C:/Users/Nico/Documents/GitHub/stakingpoolsreact/client/src/components/minerInterface.js"],"names":["Web3","QuarkChain","React","axios","ABIinterface","roiABIinterface","jrpcUrl","blockAllowance","admin","toast","web3","injectWeb3","MinerInterface","state","balance","roi","minStake","poolStatus","minerFee","poolFee","snapshotdate","props","getContractInformation","roiContract","qkc","contract","at","poolROIAddress","poolContract","poolAddress","v1","v2","v3","v4","v5","v6","v7","getBalance","err","res","Number","toFixed","toLocaleString","setState","bind","call","isClosed","post","chainId","index","then","response","data","result","Date","now","timestamp","date","toUTCString","minerName","Component","MinerChangeInterface","userAddress","window","ethereum","eth","getAccounts","accounts","event","target","value","txParams","gasPrice","gas","fromFullShardKey","getFullShardKeyFromQkcAddress","toFullShardKey","networkId","adjustMinStake","console","log","undefined","success","closeToast","warn","adjustMinerFee","adjustPoolFee","status","flushContract","takeSnaphot","e","handleMinerFeeChange","handleMinStakeChange","handlePoolFeeChange","changePoolStatus"],"mappings":"wqBAAA,MAAOA,CAAAA,IAAP,KAAiB,MAAjB,CACA,MAAOC,CAAAA,UAAP,KAAuB,iBAAvB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,YAAR,CAAsBC,eAAtB,CAAuCC,OAAvC,CAAgDC,cAAhD,CAAgEC,KAAhE,KAA4E,aAA5E,CACA,OAAQC,KAAR,KAAoB,gBAApB,C,wFAEA,GAAIC,CAAAA,IAAI,CAAG,GAAIV,CAAAA,IAAJ,EAAX,CACAC,UAAU,CAACU,UAAX,CAAsBD,IAAtB,CAA4BJ,OAA5B,E,GAEqBM,CAAAA,c,uWAGjBC,K,CAAQ,CACJC,OAAO,CAAE,EADL,CAEJC,GAAG,CAAE,EAFD,CAGJC,QAAQ,CAAE,EAHN,CAIJC,UAAU,CAAE,EAJR,CAKJC,QAAQ,CAAE,EALN,CAMJC,OAAO,CAAE,EANL,CAOJC,YAAY,CAAE,EAPV,C,2EASR,2BAAkBC,KAAlB,CAAyB,CACrB,KAAKC,sBAAL,GACH,C,sCAED,iCAAyB,iBACrB,GAAMC,CAAAA,WAAW,CAAGb,IAAI,CAACc,GAAL,CAASC,QAAT,CAAkBpB,eAAlB,EAAmCqB,EAAnC,CAAsC,KAAKL,KAAL,CAAWM,cAAjD,CAApB,CACA,GAAMC,CAAAA,YAAY,CAAGlB,IAAI,CAACc,GAAL,CAASC,QAAT,CAAkBrB,YAAlB,EAAgCsB,EAAhC,CAAmC,KAAKL,KAAL,CAAWQ,WAA9C,CAArB,CACA,GAAIX,CAAAA,QAAJ,CACA,GAAIC,CAAAA,OAAJ,CAEA,GAAIW,CAAAA,EAAJ,CACA,GAAIC,CAAAA,EAAJ,CACA,GAAIC,CAAAA,EAAJ,CACA,GAAIC,CAAAA,EAAJ,CACA,GAAIC,CAAAA,EAAJ,CACA,GAAIC,CAAAA,EAAJ,CACA,GAAIC,CAAAA,EAAJ,CAEA1B,IAAI,CAACc,GAAL,CAASa,UAAT,CAAoB,KAAKhB,KAAL,CAAWQ,WAA/B,CAA4C,SAASS,GAAT,CAAcC,GAAd,CAAmB,CAC7DT,EAAE,CAAGU,MAAM,CAAC,CAACD,GAAG,UAAC,EAAD,CAAK,EAAL,CAAJ,EAAaE,OAAb,CAAqB,CAArB,CAAD,CAAN,CAAgCC,cAAhC,GAAmD,MAAxD,CACA,KAAKC,QAAL,CAAc,CAAC7B,OAAO,CAAEgB,EAAV,CAAd,EACD,CAH2C,CAG1Cc,IAH0C,CAGrC,IAHqC,CAA5C,EAKAhB,YAAY,CAACV,QAAb,CAAsB2B,IAAtB,CAA2B,SAASP,GAAT,CAAcC,GAAd,CAAkB,CAC3CrB,QAAQ,CAAGqB,GAAG,CAAC,KAAf,CACAR,EAAE,CAAGQ,GAAG,CAAC,GAAJ,CAAQ,GAAb,CACA,KAAKI,QAAL,CAAc,CAACzB,QAAQ,CAAEa,EAAX,CAAd,EACD,CAJ0B,CAIzBa,IAJyB,CAIpB,IAJoB,CAA3B,EAKAhB,YAAY,CAACT,OAAb,CAAqB0B,IAArB,CAA0B,SAASP,GAAT,CAAcC,GAAd,CAAkB,CAC1CpB,OAAO,CAAGoB,GAAG,CAAC,KAAd,CACAP,EAAE,CAAGO,GAAG,CAAC,GAAJ,CAAQ,GAAb,CACA,KAAKI,QAAL,CAAc,CAACxB,OAAO,CAAEa,EAAV,CAAd,EACD,CAJyB,CAIxBY,IAJwB,CAInB,IAJmB,CAA1B,EAMAhB,YAAY,CAACZ,QAAb,CAAsB6B,IAAtB,CAA2B,SAASP,GAAT,CAAcC,GAAd,CAAkB,CAC3CN,EAAE,CAAGO,MAAM,CAAC,CAACD,GAAG,UAAC,EAAD,CAAK,EAAL,CAAJ,EAAaE,OAAb,CAAqB,CAArB,CAAD,CAAN,CAAgCC,cAAhC,GAAmD,MAAxD,CACA,KAAKC,QAAL,CAAc,CAAC3B,QAAQ,CAAEiB,EAAX,CAAd,EACD,CAH0B,CAGzBW,IAHyB,CAGpB,IAHoB,CAA3B,EAKAhB,YAAY,CAACkB,QAAb,CAAsBD,IAAtB,CAA2B,SAASP,GAAT,CAAcC,GAAd,CAAkB,CACzC,GAAGA,GAAG,EAAI,KAAV,CAAgB,CACdL,EAAE,CAAG,MAAL,CACD,CACD,GAAGK,GAAG,EAAI,IAAV,CAAe,CACbL,EAAE,CAAG,QAAL,CACD,CACD,KAAKS,QAAL,CAAc,CAAC1B,UAAU,CAAEiB,EAAb,CAAd,EACH,CAR0B,CAQzBU,IARyB,CAQpB,IARoB,CAA3B,EAUAzC,KAAK,CAAC4C,IAAN,CAAW,uCAAX,CAAoD,CAACC,OAAO,CAAE,KAAK3B,KAAL,CAAW4B,KAArB,CAApD,EAAiFC,IAAjF,CAAsF,SAACC,QAAD,CAAc,CAChG,GAAMC,CAAAA,IAAI,CAAGD,QAAQ,CAACC,IAAtB,CAEA1C,IAAI,CAACc,GAAL,CAASa,UAAT,CAAoB,MAAI,CAAChB,KAAL,CAAWQ,WAA/B,CAA4C,SAASS,GAAT,CAAcC,GAAd,CAAmB,CAC3D,GAAMc,CAAAA,MAAM,CAAG,CAAG,CAACd,GAAG,CAACC,MAAM,CAACY,IAAI,CAACtC,OAAN,CAAX,GAA4B,CAAC0B,MAAM,CAACY,IAAI,CAACtC,OAAN,CAAN,CAAqBP,cAAc,CAAC,KAAKc,KAAL,CAAW4B,KAAZ,CAApC,EAAwDR,OAAxD,CAAgE,CAAhE,EAAmElC,cAAc,CAAC,KAAKc,KAAL,CAAW4B,KAAZ,CAA7G,CAAD,EAAqIK,IAAI,CAACC,GAAL,GAAWf,MAAM,CAACY,IAAI,CAACI,SAAN,CAAtJ,CAAD,EAA4K,KAAK,IAAL,CAAU,EAAV,CAAa,EAAzL,GAA8L,GAAGtC,QAAQ,CAACC,OAAZ,CAA9L,EAAoN,GAArN,EAA0NsB,OAA1N,CAAkO,CAAlO,CAAf,CACAN,EAAE,CAAGkB,MAAM,CAAG,MAAT,CAAkB,CAACA,MAAM,CAAC,EAAR,EAAYZ,OAAZ,CAAoB,CAApB,CAAlB,CAA2C,GAAhD,CACA,GAAIgB,CAAAA,IAAI,CAAG,GAAIH,CAAAA,IAAJ,CAASd,MAAM,CAACY,IAAI,CAACI,SAAN,CAAf,CAAX,CACApB,EAAE,CAAGqB,IAAI,CAACC,WAAL,EAAL,CACA,KAAKf,QAAL,CAAc,CAAC5B,GAAG,CAAEoB,EAAN,CAAd,EACA,KAAKQ,QAAL,CAAc,CAACvB,YAAY,CAAEgB,EAAf,CAAd,EAEAjC,KAAK,CAAC4C,IAAN,CAAW,kCAAX,CAA+C,CAACC,OAAO,CAAE,KAAK3B,KAAL,CAAW4B,KAArB,CAA4BlC,GAAG,CAAEsC,MAAjC,CAA/C,EACH,CAT2C,CAS1CT,IAT0C,CASrC,MATqC,CAA5C,EAUH,CAbD,EAcD,C,sBAGH,iBAAS,CACL,mBACI,eAAO,SAAS,CAAC,MAAjB,wBACI,oCACA,WAAI,SAAS,CAAC,YAAd,CAA2B,IAAI,CAAE,yCAA2C,KAAKvB,KAAL,CAAWQ,WAAvF,uBACQ,WAAI,OAAO,CAAC,GAAZ,uBACA,WAAG,IAAI,CAAE,yCAA2C,KAAKR,KAAL,CAAWQ,WAA/D,CAA4E,MAAM,CAAC,QAAnF,CAA4F,SAAS,CAAC,MAAtG,WAA8G,KAAKR,KAAL,CAAWsC,SAAzH,aAA6I,KAAKtC,KAAL,CAAW4B,KAAxJ,WADA,EADR,EADA,EADJ,cAQI,sCACI,YAAI,SAAS,CAAC,YAAd,wBACI,oDADJ,cAEI,WAAI,OAAO,CAAC,GAAZ,UAAiB,KAAKpC,KAAL,CAAWE,GAA5B,EAFJ,GADJ,cAKI,YAAI,SAAS,CAAC,YAAd,wBACI,oCADJ,cAEI,WAAI,OAAO,CAAC,GAAZ,UAAiB,KAAKF,KAAL,CAAWC,OAA5B,EAFJ,GALJ,cASI,YAAI,SAAS,CAAC,YAAd,wBACI,qCADJ,cAEI,WAAI,OAAO,CAAC,GAAZ,UAAiB,KAAKD,KAAL,CAAWG,QAA5B,EAFJ,GATJ,cAaI,YAAI,SAAS,CAAC,YAAd,wBACI,mCADJ,cAEI,WAAI,OAAO,CAAC,GAAZ,UAAiB,KAAKH,KAAL,CAAWI,UAA5B,EAFJ,GAbJ,cAiBI,YAAI,SAAS,CAAC,YAAd,wBACI,iCADJ,cAEI,WAAI,OAAO,CAAC,GAAZ,UAAiB,KAAKJ,KAAL,CAAWK,QAA5B,EAFJ,GAjBJ,cAqBI,YAAI,SAAS,CAAC,YAAd,wBACI,gCADJ,cAEI,WAAI,OAAO,CAAC,GAAZ,UAAiB,KAAKL,KAAL,CAAWM,OAA5B,EAFJ,GArBJ,cAyBI,YAAI,SAAS,CAAC,YAAd,wBACI,0CADJ,cAEI,WAAI,OAAO,CAAC,GAAZ,UAAiB,KAAKN,KAAL,CAAWO,YAA5B,EAFJ,GAzBJ,GARJ,cAsCI,KAAC,oBAAD,EAAsB,WAAW,CAAE,KAAKC,KAAL,CAAWQ,WAA9C,CAA2D,SAAS,CAAE,KAAKR,KAAL,CAAWsC,SAAjF,CAA4F,IAAI,CAAE,KAAKtC,KAAL,CAAWX,IAA7G,CAAmH,KAAK,CAAE,KAAKW,KAAL,CAAW4B,KAArI,EAtCJ,GADJ,CA0CH,C,4BAzHuC/C,KAAK,CAAC0D,S,SAA7BhD,c,gBA4HfiD,CAAAA,oB,+YACFhD,K,CAAO,CACHG,QAAQ,CAAE,EADP,CAEHE,QAAQ,CAAE,EAFP,CAGHC,OAAO,CAAE,EAHN,CAIHS,YAAY,CAAE,EAJX,CAKHkC,WAAW,CAAE,EALV,C,kFAQP,2BAAkBzC,KAAlB,CAAyB,CACrB,KAAKsB,QAAL,CAAc,CAACf,YAAY,CAAE,KAAKP,KAAL,CAAWX,IAAX,CAAgBc,GAAhB,CAAoBC,QAApB,CAA6BrB,YAA7B,EAA2CsB,EAA3C,CAA8C,KAAKL,KAAL,CAAWQ,WAAzD,CAAf,CAAd,EACA,GAAGkC,MAAM,CAACC,QAAV,CAAmB,CACf,KAAK3C,KAAL,CAAWX,IAAX,CAAgBuD,GAAhB,CAAoBC,WAApB,GAAkChB,IAAlC,CAAuC,SAASiB,QAAT,CAAmB,CACtD,KAAKxB,QAAL,CAAc,CAACmB,WAAW,CAAEK,QAAQ,CAAC,CAAD,CAAtB,CAAd,EACH,CAFsC,CAErCvB,IAFqC,CAEhC,IAFgC,CAAvC,EAGH,CAEJ,C,oCAED,8BAAqBwB,KAArB,CAA4B,CACxB,KAAKzB,QAAL,CAAc,CAAC3B,QAAQ,CAAEoD,KAAK,CAACC,MAAN,CAAaC,KAAxB,CAAd,EACH,C,oCAED,8BAAqBF,KAArB,CAA4B,CACxB,KAAKzB,QAAL,CAAc,CAACzB,QAAQ,CAAEkD,KAAK,CAACC,MAAN,CAAaC,KAAxB,CAAd,EACH,C,mCAED,6BAAoBF,KAApB,CAA2B,CACvB,KAAKzB,QAAL,CAAc,CAACxB,OAAO,CAAEiD,KAAK,CAACC,MAAN,CAAaC,KAAvB,CAAd,EACH,C,8BAED,yBAAiB,CAAE;AAEf,GAAMC,CAAAA,QAAQ,CAAG,CACfC,QAAQ,CAAE,GADK,CAEfC,GAAG,CAAE,MAFU,CAGfC,gBAAgB,CAAEzE,UAAU,CAAC0E,6BAAX,CAAyC,KAAKtD,KAAL,CAAWQ,WAApD,CAHH,CAIf+C,cAAc,CAAE3E,UAAU,CAAC0E,6BAAX,CAAyC,KAAKtD,KAAL,CAAWQ,WAApD,CAJD,CAKfgD,SAAS,CAAE,CALI,CAAjB,CAQA,KAAKhE,KAAL,CAAWe,YAAX,CAAwBkD,cAAxB,CAAwC,KAAKjE,KAAL,CAAWG,QAAX,CAAoB,IAA5D,CAAmEuD,QAAnE,CAA6E,SAASjC,GAAT,CAAcC,GAAd,CAAmB,CAC5FwC,OAAO,CAACC,GAAR,CAAYzC,GAAZ,EACF,GAAGA,GAAG,EAAI,4EAAP,EAAuFA,GAAG,EAAI0C,SAA9F,EAA2G1C,GAAG,EAAI,IAArH,CAA2H,CACzH9B,KAAK,CAACyE,OAAN,CAAc,kBAAGC,CAAAA,UAAH,MAAGA,UAAH,oBAAoB,4CAAU,UAAG,IAAI,4CAAsC5C,GAAtC,CAAP,CAAoD,MAAM,CAAC,QAA3D,kCAAV,4BAApB,EAAd,EACD,CAFD,IAEO,CACL9B,KAAK,CAAC2E,IAAN,CAAW,+CAAX,EACD,CACF,CAPD,EAQD,C,8BAEH,yBAAiB,CAAE;AAEf,GAAMb,CAAAA,QAAQ,CAAG,CACbC,QAAQ,CAAE,GADG,CAEbC,GAAG,CAAE,MAFQ,CAGbC,gBAAgB,CAAEzE,UAAU,CAAC0E,6BAAX,CAAyC,KAAKtD,KAAL,CAAWQ,WAApD,CAHL,CAIb+C,cAAc,CAAE3E,UAAU,CAAC0E,6BAAX,CAAyC,KAAKtD,KAAL,CAAWQ,WAApD,CAJH,CAKbgD,SAAS,CAAE,CALE,CAAjB,CAQA,KAAKhE,KAAL,CAAWe,YAAX,CAAwByD,cAAxB,CAAuC,CAAC,KAAKxE,KAAL,CAAWK,QAAX,CAAoB,GAArB,EAA0BuB,OAA1B,CAAkC,CAAlC,CAAvC,CAA6E8B,QAA7E,CAAuF,SAASjC,GAAT,CAAcC,GAAd,CAAmB,CACtG,GAAGA,GAAG,EAAI,4EAAP,EAAuFA,GAAG,EAAI0C,SAA9F,EAA2G1C,GAAG,EAAI,IAArH,CAA2H,CAC3H9B,KAAK,CAACyE,OAAN,CAAc,mBAAGC,CAAAA,UAAH,OAAGA,UAAH,oBAAoB,4CAAU,UAAG,IAAI,4CAAsC5C,GAAtC,CAAP,CAAoD,MAAM,CAAC,QAA3D,kCAAV,4BAApB,EAAd,EACC,CAFD,IAEO,CACP9B,KAAK,CAAC2E,IAAN,CAAW,+CAAX,EACC,CACJ,CAND,EAOH,C,6BAED,wBAAgB,CAAE;AAEd,GAAMb,CAAAA,QAAQ,CAAG,CACbC,QAAQ,CAAE,GADG,CAEbC,GAAG,CAAE,MAFQ,CAGbC,gBAAgB,CAAEzE,UAAU,CAAC0E,6BAAX,CAAyC,KAAKtD,KAAL,CAAWQ,WAApD,CAHL,CAIb+C,cAAc,CAAE3E,UAAU,CAAC0E,6BAAX,CAAyC,KAAKtD,KAAL,CAAWQ,WAApD,CAJH,CAKbgD,SAAS,CAAE,CALE,CAAjB,CAQA,KAAKhE,KAAL,CAAWe,YAAX,CAAwB0D,aAAxB,CAAuC,KAAKzE,KAAL,CAAWM,OAAZ,CAAqBsB,OAArB,CAA6B,CAA7B,EAAgC,GAAtE,CAA2E8B,QAA3E,CAAqF,SAASjC,GAAT,CAAcC,GAAd,CAAmB,CACpG,GAAGA,GAAG,EAAI,4EAAP,EAAuFA,GAAG,EAAI0C,SAA9F,EAA2G1C,GAAG,EAAI,IAArH,CAA2H,CAC3H9B,KAAK,CAACyE,OAAN,CAAc,mBAAGC,CAAAA,UAAH,OAAGA,UAAH,oBAAoB,4CAAU,UAAG,IAAI,4CAAsC5C,GAAtC,CAAP,CAAoD,MAAM,CAAC,QAA3D,iCAAV,4BAApB,EAAd,EACC,CAFD,IAEO,CACP9B,KAAK,CAAC2E,IAAN,CAAW,+CAAX,EACC,CACJ,CAND,EAOH,C,gCAED,0BAAiBG,MAAjB,CAAyB,CAAE;AAEvB,GAAMhB,CAAAA,QAAQ,CAAG,CACbC,QAAQ,CAAE,GADG,CAEbC,GAAG,CAAE,MAFQ,CAGbC,gBAAgB,CAAEzE,UAAU,CAAC0E,6BAAX,CAAyC,KAAKtD,KAAL,CAAWQ,WAApD,CAHL,CAIb+C,cAAc,CAAE3E,UAAU,CAAC0E,6BAAX,CAAyC,KAAKtD,KAAL,CAAWQ,WAApD,CAJH,CAKbgD,SAAS,CAAE,CALE,CAAjB,CAQA,KAAKhE,KAAL,CAAWe,YAAX,CAAwB0D,aAAxB,CAAsCC,MAAtC,CAA8ChB,QAA9C,CAAwD,SAASjC,GAAT,CAAcC,GAAd,CAAmB,CACvE,GAAGA,GAAG,EAAI,4EAAP,EAAuFA,GAAG,EAAI0C,SAA9F,EAA2G1C,GAAG,EAAI,IAArH,CAA2H,CAC3H9B,KAAK,CAACyE,OAAN,CAAc,mBAAGC,CAAAA,UAAH,OAAGA,UAAH,oBAAoB,4CAAU,UAAG,IAAI,4CAAsC5C,GAAtC,CAAP,CAAoD,MAAM,CAAC,QAA3D,iCAAV,4BAApB,EAAd,EACC,CAFD,IAEO,CACP9B,KAAK,CAAC2E,IAAN,CAAW,+CAAX,EACC,CACJ,CAND,EAOH,C,6BAED,wBAAgB,CAAE;AAEd,GAAMb,CAAAA,QAAQ,CAAG,CACbC,QAAQ,CAAE,GADG,CAEbC,GAAG,CAAE,OAFQ,CAGbC,gBAAgB,CAAEzE,UAAU,CAAC0E,6BAAX,CAAyC,KAAKtD,KAAL,CAAWQ,WAApD,CAHL,CAIb+C,cAAc,CAAE3E,UAAU,CAAC0E,6BAAX,CAAyC,KAAKtD,KAAL,CAAWQ,WAApD,CAJH,CAKbgD,SAAS,CAAE,CALE,CAAjB,CAQA,KAAKhE,KAAL,CAAWe,YAAX,CAAwB4D,aAAxB,CAAsCjB,QAAtC,CAAgD,SAASjC,GAAT,CAAcC,GAAd,CAAmB,CAC/D,GAAGA,GAAG,EAAI,4EAAP,EAAuFA,GAAG,EAAI0C,SAA9F,EAA2G1C,GAAG,EAAI,IAArH,CAA2H,CAC3H9B,KAAK,CAACyE,OAAN,CAAc,8BAAM,4CAAU,UAAG,IAAI,4CAAsC3C,GAAtC,CAAP,CAAoD,MAAM,CAAC,QAA3D,iCAAV,4BAAN,EAAd,EACC,CAFD,IAEO,CACP9B,KAAK,CAAC2E,IAAN,CAAW,+CAAX,EACC,CACJ,CAND,EAOH,C,2BAED,sBAAc,CACV,KAAK/D,KAAL,CAAWX,IAAX,CAAgBc,GAAhB,CAAoBa,UAApB,CAA+B,KAAKhB,KAAL,CAAWQ,WAA1C,CAAuD,SAASS,GAAT,CAAcC,GAAd,CAAmB,CACtEpC,KAAK,CAAC4C,IAAN,CAAW,uCAAX,CAAoD,CAACC,OAAO,CAAE,KAAK3B,KAAL,CAAW4B,KAArB,CAA4BnC,OAAO,CAAEyB,GAArC,CAApD,EAA+FW,IAA/F,CAAoG,SAASZ,GAAT,CAAaC,GAAb,CAAiB,CACjH9B,KAAK,CAACyE,OAAN,CAAc,8BAAM,sEAAN,EAAd,EACH,CAFmG,CAElGtC,IAFkG,CAE7F,IAF6F,CAApG,EAGH,CAJsD,CAIrDA,IAJqD,CAIhD,IAJgD,CAAvD,EAKH,C,sBAED,iBAAS,iBACL,GAAG,KAAK/B,KAAL,CAAWiD,WAAX,EAA0BtD,KAAK,CAAC,CAAD,CAA/B,EAAsC,KAAKK,KAAL,CAAWiD,WAAX,EAA0BtD,KAAK,CAAC,CAAD,CAArE,EAA4E,KAAKK,KAAL,CAAWiD,WAAX,EAA0BtD,KAAK,CAAC,CAAD,CAA9G,CAAkH,CAElH,mBACQ,oCACI,WAAI,SAAS,CAAC,YAAd,uBACI,WAAI,OAAO,CAAC,GAAZ,uDADJ,EADJ,EADR,CAOC,CATD,IASO,CACH,mBACI,sCACI,WAAI,SAAS,CAAC,YAAd,uBACI,WAAI,OAAO,CAAC,GAAZ,uBACI,eAAQ,SAAS,CAAC,KAAlB,CAAwB,OAAO,CAAE,KAAKiF,WAAL,CAAiB7C,IAAjB,CAAsB,IAAtB,CAAjC,+BADJ,EADJ,EADJ,cAMI,YAAI,SAAS,CAAC,YAAd,wBACI,2CAAuB,KAAKvB,KAAL,CAAWsC,SAAlC,OADJ,cAEI,iCACI,cAAO,SAAS,CAAC,KAAjB,CAAuB,IAAI,CAAC,QAA5B,CAAqC,GAAG,CAAC,GAAzC,CAA6C,GAAG,CAAE,KAAlD,CAAwD,WAAW,CAAC,0BAApE,CAA+F,KAAK,CAAE,KAAK9C,KAAL,CAAWK,QAAjH,CAA2H,QAAQ,CAAE,kBAAAwE,CAAC,QAAI,CAAA,MAAI,CAACC,oBAAL,CAA0BD,CAA1B,CAAJ,EAAtI,EADJ,EAFJ,cAKI,iCACI,eAAQ,SAAS,CAAC,KAAlB,CAAwB,OAAO,CAAE,KAAKL,cAAL,CAAoBzC,IAApB,CAAyB,IAAzB,CAAjC,oBADJ,EALJ,GANJ,cAeI,YAAI,SAAS,CAAC,YAAd,wBACI,mDADJ,cAEI,iCACI,cAAO,SAAS,CAAC,KAAjB,CAAuB,IAAI,CAAC,QAA5B,CAAqC,GAAG,CAAC,GAAzC,CAA6C,WAAW,CAAC,iBAAzD,CAA2E,KAAK,CAAE,KAAK/B,KAAL,CAAWG,QAA7F,CAAuG,QAAQ,CAAE,kBAAA0E,CAAC,QAAI,CAAA,MAAI,CAACE,oBAAL,CAA0BF,CAA1B,CAAJ,EAAlH,EADJ,EAFJ,cAKI,iCACI,eAAQ,SAAS,CAAC,KAAlB,CAAwB,OAAO,CAAE,KAAKZ,cAAL,CAAoBlC,IAApB,CAAyB,IAAzB,CAAjC,oBADJ,EALJ,GAfJ,cAwBI,YAAI,SAAS,CAAC,YAAd,wBACI,6CADJ,cAEI,iCACI,cAAO,SAAS,CAAC,KAAjB,CAAuB,IAAI,CAAC,QAA5B,CAAqC,GAAG,CAAC,GAAzC,CAA6C,GAAG,CAAE,KAAlD,CAAwD,WAAW,CAAC,0BAApE,CAA+F,KAAK,CAAE,KAAK/B,KAAL,CAAWM,OAAjH,CAA0H,QAAQ,CAAE,kBAAAuE,CAAC,QAAI,CAAA,MAAI,CAACG,mBAAL,CAAyBH,CAAzB,CAAJ,EAArI,EADJ,EAFJ,cAKI,iCACI,eAAQ,SAAS,CAAC,KAAlB,CAAwB,OAAO,CAAE,KAAKJ,aAAL,CAAmB1C,IAAnB,CAAwB,IAAxB,CAAjC,oBADJ,EALJ,GAxBJ,cAiCI,YAAI,SAAS,CAAC,YAAd,wBACI,0DADJ,cAEI,iCACI,eAAQ,SAAS,CAAC,KAAlB,CAAwB,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACkD,gBAAL,CAAsB,KAAtB,CAAN,EAAjC,kBADJ,EAFJ,cAKI,iCACI,eAAQ,SAAS,CAAC,KAAlB,CAAwB,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACA,gBAAL,CAAsB,IAAtB,CAAN,EAAjC,mBADJ,EALJ,GAjCJ,cA0CI,WAAI,SAAS,CAAC,YAAd,uBACI,WAAI,OAAO,CAAC,GAAZ,uBACI,eAAQ,SAAS,CAAC,KAAlB,CAAwB,OAAO,CAAE,KAAKN,aAAL,CAAmB5C,IAAnB,CAAwB,IAAxB,CAAjC,kCADJ,EADJ,EA1CJ,GADJ,CAkDH,CACJ,C,kCArM8B1C,KAAK,CAAC0D,S","sourcesContent":["import Web3 from 'web3';\r\nimport QuarkChain from 'quarkchain-web3';\r\nimport React from 'react';\r\nimport axios from 'axios';\r\nimport {ABIinterface, roiABIinterface, jrpcUrl, blockAllowance, admin} from './config.js';\r\nimport {toast} from 'react-toastify';\r\n\r\nlet web3 = new Web3();\r\nQuarkChain.injectWeb3(web3, jrpcUrl)\r\n\r\nexport default class MinerInterface extends React.Component {\r\n    //minerName, web3, poolAddress, poolROIAddress, index\r\n\r\n    state = {\r\n        balance: '',\r\n        roi: '',\r\n        minStake: '',\r\n        poolStatus: '',\r\n        minerFee: '',\r\n        poolFee: '',\r\n        snapshotdate: ''\r\n    }\r\n    componentDidMount(props) {\r\n        this.getContractInformation();\r\n    }\r\n        \r\n    getContractInformation() {\r\n        const roiContract = web3.qkc.contract(roiABIinterface).at(this.props.poolROIAddress);\r\n        const poolContract = web3.qkc.contract(ABIinterface).at(this.props.poolAddress);\r\n        let minerFee;\r\n        let poolFee;\r\n      \r\n        let v1;\r\n        let v2;\r\n        let v3;\r\n        let v4;\r\n        let v5;\r\n        let v6;\r\n        let v7;\r\n      \r\n        web3.qkc.getBalance(this.props.poolAddress, function(err, res) {\r\n          v1 = Number((res/10**18).toFixed(2)).toLocaleString() + \" QKC\";\r\n          this.setState({balance: v1})\r\n        }.bind(this));\r\n      \r\n        poolContract.minerFee.call(function(err, res){\r\n          minerFee = res/10000\r\n          v2 = res/100+\"%\";\r\n          this.setState({minerFee: v2})\r\n        }.bind(this));\r\n        poolContract.poolFee.call(function(err, res){\r\n          poolFee = res/10000\r\n          v3 = res/100+\"%\";\r\n          this.setState({poolFee: v3})\r\n        }.bind(this));\r\n    \r\n        poolContract.minStake.call(function(err, res){\r\n          v4 = Number((res/10**18).toFixed(2)).toLocaleString() + \" QKC\";\r\n          this.setState({minStake: v4})\r\n        }.bind(this));\r\n      \r\n        poolContract.isClosed.call(function(err, res){\r\n            if(res == false){\r\n              v5 = \"Open\";\r\n            }\r\n            if(res == true){  \r\n              v5 = \"Closed\";\r\n            }\r\n            this.setState({poolStatus: v5})\r\n        }.bind(this));\r\n      \r\n        axios.post(\"http://localhost:3001/api/getSnapshot\", {chainId: this.props.index}).then((response) => {\r\n            const data = response.data;\r\n            \r\n            web3.qkc.getBalance(this.props.poolAddress, function(err, res) {\r\n                const result = ((((res-Number(data.balance))/((Number(data.balance)/blockAllowance[this.props.index]).toFixed(0)*blockAllowance[this.props.index]))/((Date.now()-Number(data.timestamp))))*(1000*3600*24*30)*(1-(minerFee+poolFee))*100).toFixed(3);\r\n                v6 = result + \"% / \" + (result*12).toFixed(1) + \"%\";\r\n                let date = new Date(Number(data.timestamp))\r\n                v7 = date.toUTCString()\r\n                this.setState({roi: v6});\r\n                this.setState({snapshotdate: v7})\r\n\r\n                axios.post(\"http://localhost:3001/api/newROI\", {chainId: this.props.index, roi: result})\r\n            }.bind(this));\r\n        });\r\n      }\r\n\r\n    \r\n    render() {\r\n        return (\r\n            <table className=\"pool\">\r\n                <thead>\r\n                <tr className=\"rowcolour1\" href={\"https://mainnet.quarkchain.io/address/\" + this.props.poolAddress}>\r\n                        <th colSpan=\"3\">\r\n                        <a href={\"https://mainnet.quarkchain.io/address/\" + this.props.poolAddress} target=\"_blank\" className=\"href\">{this.props.minerName}'s Chain {this.props.index} Pool</a>\r\n                        </th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr className=\"rowcolour2\">\r\n                        <td>Estimated ROI monthly/annual</td>\r\n                        <td colSpan=\"2\">{this.state.roi}</td>\r\n                    </tr>\r\n                    <tr className=\"rowcolour1\">\r\n                        <td>Total Stakes</td>\r\n                        <td colSpan=\"2\">{this.state.balance}</td>\r\n                    </tr>\r\n                    <tr className=\"rowcolour2\">\r\n                        <td>Minimum Stake</td>\r\n                        <td colSpan=\"2\">{this.state.minStake}</td>\r\n                    </tr>\r\n                    <tr className=\"rowcolour1\">\r\n                        <td>Pool Status</td>\r\n                        <td colSpan=\"2\">{this.state.poolStatus}</td>\r\n                    </tr>\r\n                    <tr className=\"rowcolour2\">\r\n                        <td>Miner Fee</td>\r\n                        <td colSpan=\"2\">{this.state.minerFee}</td>\r\n                    </tr>\r\n                    <tr className=\"rowcolour1\">\r\n                        <td>Pool Fee</td>\r\n                        <td colSpan=\"2\">{this.state.poolFee}</td>\r\n                    </tr>\r\n                    <tr className=\"rowcolour2\">\r\n                        <td>Last Snapshot Date</td>\r\n                        <td colSpan=\"2\">{this.state.snapshotdate}</td>\r\n                    </tr>\r\n                </tbody>\r\n                <MinerChangeInterface poolAddress={this.props.poolAddress} minerName={this.props.minerName} web3={this.props.web3} index={this.props.index}/>\r\n            </table>\r\n        )\r\n    }\r\n}\r\n\r\nclass MinerChangeInterface extends React.Component {\r\n    state= {\r\n        minStake: '',\r\n        minerFee: '',\r\n        poolFee: '',\r\n        poolContract: '',\r\n        userAddress: ''\r\n    }\r\n\r\n    componentDidMount(props) {\r\n        this.setState({poolContract: this.props.web3.qkc.contract(ABIinterface).at(this.props.poolAddress)})\r\n        if(window.ethereum){\r\n            this.props.web3.eth.getAccounts().then(function(accounts) {\r\n                this.setState({userAddress: accounts[0]})\r\n            }.bind(this))\r\n        }\r\n        \r\n    }\r\n\r\n    handleMinStakeChange(event) {\r\n        this.setState({minStake: event.target.value});\r\n    }\r\n\r\n    handleMinerFeeChange(event) {\r\n        this.setState({minerFee: event.target.value});\r\n    }\r\n\r\n    handlePoolFeeChange(event) {\r\n        this.setState({poolFee: event.target.value});\r\n    }\r\n\r\n    adjustMinStake() { //called when \"Withdraw\" button is clicked\r\n  \r\n        const txParams = {\r\n          gasPrice: 2e9,\r\n          gas: 350000,\r\n          fromFullShardKey: QuarkChain.getFullShardKeyFromQkcAddress(this.props.poolAddress),\r\n          toFullShardKey: QuarkChain.getFullShardKeyFromQkcAddress(this.props.poolAddress),\r\n          networkId: 1\r\n        }\r\n        \r\n        this.state.poolContract.adjustMinStake((this.state.minStake*1e18), txParams, function(err, res) {\r\n            console.log(res)\r\n          if(res != \"0x000000000000000000000000000000000000000000000000000000000000000000000000\" && res != undefined && res != null) {\r\n            toast.success(({ closeToast }) => <div>Your <a href={`https://mainnet.quarkchain.io/tx/${res}`} target=\"_blank\">min stake adjustment</a> was sent successfully</div>) \r\n          } else {\r\n            toast.warn(\"Seems that your transaction has been declined\")\r\n          }\r\n        });\r\n      }\r\n\r\n    adjustMinerFee() { //called when \"Withdraw\" button is clicked\r\n\r\n        const txParams = {\r\n            gasPrice: 2e9,\r\n            gas: 350000,\r\n            fromFullShardKey: QuarkChain.getFullShardKeyFromQkcAddress(this.props.poolAddress),\r\n            toFullShardKey: QuarkChain.getFullShardKeyFromQkcAddress(this.props.poolAddress),\r\n            networkId: 1\r\n        }\r\n        \r\n        this.state.poolContract.adjustMinerFee((this.state.minerFee*100).toFixed(2), txParams, function(err, res) {\r\n            if(res != \"0x000000000000000000000000000000000000000000000000000000000000000000000000\" && res != undefined && res != null) {\r\n            toast.success(({ closeToast }) => <div>Your <a href={`https://mainnet.quarkchain.io/tx/${res}`} target=\"_blank\">miner fee adjustment</a> was sent successfully</div>) \r\n            } else {\r\n            toast.warn(\"Seems that your transaction has been declined\")\r\n            }\r\n        });\r\n    }\r\n\r\n    adjustPoolFee() { //called when \"Withdraw\" button is clicked\r\n\r\n        const txParams = {\r\n            gasPrice: 2e9,\r\n            gas: 350000,\r\n            fromFullShardKey: QuarkChain.getFullShardKeyFromQkcAddress(this.props.poolAddress),\r\n            toFullShardKey: QuarkChain.getFullShardKeyFromQkcAddress(this.props.poolAddress),\r\n            networkId: 1\r\n        }\r\n        \r\n        this.state.poolContract.adjustPoolFee((this.state.poolFee).toFixed(2)*100, txParams, function(err, res) {\r\n            if(res != \"0x000000000000000000000000000000000000000000000000000000000000000000000000\" && res != undefined && res != null) {\r\n            toast.success(({ closeToast }) => <div>Your <a href={`https://mainnet.quarkchain.io/tx/${res}`} target=\"_blank\">pool fee adjustment</a> was sent successfully</div>) \r\n            } else {\r\n            toast.warn(\"Seems that your transaction has been declined\")\r\n            }\r\n        });\r\n    }\r\n\r\n    changePoolStatus(status) { //called when \"Withdraw\" button is clicked\r\n\r\n        const txParams = {\r\n            gasPrice: 2e9,\r\n            gas: 350000,\r\n            fromFullShardKey: QuarkChain.getFullShardKeyFromQkcAddress(this.props.poolAddress),\r\n            toFullShardKey: QuarkChain.getFullShardKeyFromQkcAddress(this.props.poolAddress),\r\n            networkId: 1\r\n        }\r\n        \r\n        this.state.poolContract.adjustPoolFee(status, txParams, function(err, res) {\r\n            if(res != \"0x000000000000000000000000000000000000000000000000000000000000000000000000\" && res != undefined && res != null) {\r\n            toast.success(({ closeToast }) => <div>Your <a href={`https://mainnet.quarkchain.io/tx/${res}`} target=\"_blank\">pool fee adjustment</a> was sent successfully</div>) \r\n            } else {\r\n            toast.warn(\"Seems that your transaction has been declined\")\r\n            }\r\n        });\r\n    }\r\n\r\n    flushContract() { //called when \"Withdraw\" button is clicked\r\n\r\n        const txParams = {\r\n            gasPrice: 2e9,\r\n            gas: 6000000,\r\n            fromFullShardKey: QuarkChain.getFullShardKeyFromQkcAddress(this.props.poolAddress),\r\n            toFullShardKey: QuarkChain.getFullShardKeyFromQkcAddress(this.props.poolAddress),\r\n            networkId: 1\r\n        }\r\n        \r\n        this.state.poolContract.flushContract(txParams, function(err, res) {\r\n            if(res != \"0x000000000000000000000000000000000000000000000000000000000000000000000000\" && res != undefined && res != null) {\r\n            toast.success(() => <div>Your <a href={`https://mainnet.quarkchain.io/tx/${res}`} target=\"_blank\">pool fee adjustment</a> was sent successfully</div>) \r\n            } else {\r\n            toast.warn(\"Seems that your transaction has been declined\")\r\n            }\r\n        });\r\n    }\r\n\r\n    takeSnaphot() {\r\n        this.props.web3.qkc.getBalance(this.props.poolAddress, function(err, res) {\r\n            axios.post(\"http://localhost:3001/api/newSnapshot\", {chainId: this.props.index, balance: res}).then(function(err,res){\r\n                toast.success(() => <div>New snapshot successfully queried to database</div>)\r\n            }.bind(this));\r\n        }.bind(this))\r\n    }\r\n\r\n    render() {\r\n        if(this.state.userAddress != admin[0] && this.state.userAddress != admin[1] && this.state.userAddress != admin[2]){\r\n            \r\n        return(\r\n                <tbody>\r\n                    <tr className=\"rowcolour1\">\r\n                        <td colSpan=\"2\">Please connect with a valid admin account</td>\r\n                    </tr>\r\n                </tbody>\r\n            )\r\n        } else {\r\n            return(\r\n                <tbody>\r\n                    <tr className=\"rowcolour1\">\r\n                        <td colSpan=\"3\">\r\n                            <button className=\"but\" onClick={this.takeSnaphot.bind(this)}>Take New Snapshot</button>\r\n                        </td>\r\n                    </tr>\r\n                    <tr className=\"rowcolour2\">\r\n                        <td>Adjust Miner Fee ({this.props.minerName})</td>\r\n                        <td>\r\n                            <input className=\"inp\" type=\"number\" min=\"0\" max= \"100\" placeholder=\"% value up to 2 decimals\" value={this.state.minerFee} onChange={e => this.handleMinerFeeChange(e)} />\r\n                        </td>\r\n                        <td>\r\n                            <button className=\"but\" onClick={this.adjustMinerFee.bind(this)}>Change</button>\r\n                        </td>\r\n                    </tr>\r\n                    <tr className=\"rowcolour1\">\r\n                        <td>Adjust Minimum Stake (Nico)</td>\r\n                        <td>\r\n                            <input className=\"inp\" type=\"number\" min=\"0\" placeholder=\"minStake in QKC\" value={this.state.minStake} onChange={e => this.handleMinStakeChange(e)} />\r\n                        </td>\r\n                        <td>\r\n                            <button className=\"but\" onClick={this.adjustMinStake.bind(this)}>Change</button>\r\n                        </td>\r\n                    </tr>\r\n                    <tr className=\"rowcolour2\">\r\n                        <td>Adjust Pool Fee(Nico)</td>\r\n                        <td>\r\n                            <input className=\"inp\" type=\"number\" min=\"0\" max= \"100\" placeholder=\"% value up to 2 decimals\" value={this.state.poolFee} onChange={e => this.handlePoolFeeChange(e)} />\r\n                        </td>\r\n                        <td>\r\n                            <button className=\"but\" onClick={this.adjustPoolFee.bind(this)}>Change</button>\r\n                        </td>\r\n                    </tr>\r\n                    <tr className=\"rowcolour1\">\r\n                        <td>Open/Close Pool Allocations (Nico)</td>\r\n                        <td>\r\n                            <button className=\"but\" onClick={() => this.changePoolStatus(false)}>Open</button>\r\n                        </td>\r\n                        <td>\r\n                            <button className=\"but\" onClick={() => this.changePoolStatus(true)}>Close</button>\r\n                        </td>\r\n                    </tr>\r\n                    <tr className=\"rowcolour2\">\r\n                        <td colSpan=\"3\">\r\n                            <button className=\"but\" onClick={this.flushContract.bind(this)}>Flush Contract(Nico)</button>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n        )\r\n        }\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}